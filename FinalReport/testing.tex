% This is part of the FinalReport document.
% Copyright (C) 2011 Piyabhum Sornpaisarn, Andrew Busse, Michael Hodgson, John Charlesworth, Paramithi Svastisinha
% See the file COPYING in FinalReport/ for copying conditions.

%% ----------------------------------------------------------------
\chapter{Testing}
%% ----------------------------------------------------------------
Any successful engineering project requires thorough testing. Testing throughout
the implementation of the system is essential, allowing the various stages of 
development to be verified before the next feature or stage is implemented.

Similarly testing is an important documentation tool, which allows us to determine the
exact specifications of the implemented system and helps us understand how it is 
expected to perform in real-life scenarios.

During the implementation of this system, thorough testing was an absolute
requirement. This chapter describes the various tests undertaken
throughout implementation in the terms of the milestones described in section
\ref{sec:amended_milestones}. 

Throughout this chapter, we will refer to milestones by their section numbers.
For example, the \emph{Basic Camera Connection} milestone will be referred
to as milestone \ref{sec:ms_basic_cam_comm}.

\input{testing_camera}

\input{testing_payload_autopilot}

\input{testing_GUI}

\input{testing_jpg_prog}

\section{Test: Waypoint Triggering}
\label{sec:test_wp_trig}
Figure \ref{fig:test_wp} shows the autopilot triggering camera capture and \ref{fig:test_wp_pic} is an example image taken in this way.

\begin{figure}[H]
        \centering
        \includegraphics[width=1.0\textwidth]{testing_screenshots/wp_test.png}
        \captionof{figure}{Autopilot triggering image capture from waypoint script. The payload debug terminal shows the capture being triggered by the script.}
        \label{fig:test_wp}
\end{figure}

\begin{figure}[H]
        \centering
        \includegraphics[width=0.5\textwidth]{testing_screenshots/wp_test_pic.jpg}
        \captionof{figure}{An example of an image taken from waypoint triggering.}
        \label{fig:test_wp_pic}
\end{figure}

\section{System Test: 640 x 480 Image Capture and Download Time - (mh)}
\label{sec:sys_testing}

We now measure the average time taken to capture and download a single 640 x 480
pixel image from the camera through the entire capture progress, from pressing the 
``Get Picture'' button on the UI to the being downloaded over the serial link to and
displaying on the UI. Please note that this section assumes no packets are lost during
the download process.

A total of 10 measurements were taken, as shown in table \ref{table:download_time_test}.
The time taken for the image capture to the SD card and subsequent download are both
shown. A mean time of \textbf{19 seconds} can be seen. Variations in time are down to the
variations in size of the JPEG images. This is well within the 3 minutes required by the specification (see \ref{sec:spec_b}).

This test was completed on the final PCB, validating milestone \ref{sec:ms_phy_pcb_complete}.

\begin{table}[!hbtp]

	\centering
	\begin{tabular}{ | p{3cm} | p{3cm} | p{4cm} | }
	\hline
	\textbf{Capture to SD (s)} & \textbf{Download to UI (s)} & 
	\textbf{Total Time from Get Picture button to Display on UI (s)} \\ \hline

	8 & 13  & 21 \\ \hline
	9 & 15  & 24 \\ \hline
	7 & 11  & 18 \\ \hline
	6 & 11  & 17 \\ \hline
	7 & 12  & 19 \\ \hline
	7 & 11  & 18 \\ \hline
	7 & 11  & 18 \\ \hline
	7 & 12  & 19 \\ \hline
	8 & 11  & 19 \\ \hline
	7 & 11  & 18 \\ \hline
	 & \textbf{Mean:} & 19.1 \\ \hline

	\end{tabular}
	\caption{Download times for 640 x 480 image, recorded by stopwatch so subject to some human error. In all cases download was started by pressing the "Get Picture" button on the ground station UI.}
	\label{table:download_time_test}
\end{table}

\section{System Test: Final Module Weight - (ab)}
\label{sec:sys_weight}
The final populated PCB and camera weighed 57g alone and 70g with the plastic container for 
camera - well below the 250g specified in \ref{sec:spec_c}.

\input{testing_flight}

